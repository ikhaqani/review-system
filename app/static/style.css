/* app/static/style.css - "WOW Effect" Professional Redesign */

/* ===================================================================
 * ROOT VARIABELEN & DESIGN SYSTEM
 * Een compleet nieuw, high-end thema voor een "wow" effect.
 * =================================================================== */
 :root {
  /* Kleurenpalet: Professioneel, modern en met hoog contrast */
  --theme-primary: #0d9488;        /* Krachtig, modern groenblauw (Teal) */
  --theme-primary-light: #ccfbf1;  /* Zeer lichte variant voor achtergronden/highlights */
  --theme-primary-dark: #0f766e;   /* Donkerdere variant voor hover/active states */

  --theme-text-primary: #111827;   /* Bijna-zwart voor maximale leesbaarheid */
  --theme-text-secondary: #4b5563; /* Antraciet voor subteksten en labels */
  --theme-text-placeholder: #9ca3af;/* Grijs voor placeholders */

  --theme-bg-body: #f9fafb;        /* Zeer licht, bijna wit, voor de algehele achtergrond */
  --theme-bg-panel: #ffffff;       /* Puur wit voor content-vlakken */
  --theme-bg-alt: #f3f4f6;         /* Alternatieve achtergrond voor hover, secties, etc. */

  --theme-border-strong: #d1d5db;  /* Duidelijke rand voor inputs */
  --theme-border-soft: #e5e7eb;    /* Subtiele rand voor scheidingen */
  
  --theme-success: #10b981;
  --theme-warning: #f59e0b;
  --theme-danger: #ef4444;
  --theme-focus-ring: rgba(13, 148, 136, 0.25);

  /* Typografie: Modern, helder en hiërarchisch */
  --font-sans: "Inter", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-mono: "JetBrains Mono", SFMono-Regular, Menlo, Monaco, Consolas, "Courier New", monospace;
  --base-font-size: 14px;
  --line-height-base: 1.6;
  --header-letter-spacing: -0.02em;

  /* Spacing & Layout (8px Grid Systeem: 0.5rem = 8px) */
  --spacing-xs: 0.25rem;  /* 4px */
  --spacing-sm: 0.5rem;   /* 8px */
  --spacing-md: 1rem;     /* 16px */
  --spacing-lg: 1.5rem;   /* 24px */
  --spacing-xl: 2rem;     /* 32px */
  --indent-step: 2rem;    /* 32px - Duidelijke inspringing */

  /* Borders & Radius */
  --border-radius-sm: 4px;
  --border-radius-md: 6px;
  --border-radius-lg: 8px;

  /* Schaduwen (gelaagd voor diepte) */
  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);

  /* Transities (voor een 'vloeiend' gevoel) */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-smooth: 300ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Globale Layout */
  --global-header-height: 58px;
}

/* Importeer Google Fonts voor de 'wow' factor */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400&display=swap');

/* ===================================================================
 * ALGEMENE LAYOUT & BODY
 * =================================================================== */
body {
  font-family: var(--font-sans);
  background-color: var(--theme-bg-body);
  color: var(--theme-text-primary);
  font-size: var(--base-font-size);
  line-height: var(--line-height-base);
  padding-top: var(--global-header-height);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.main-container {
  max-width: 1280px;
  margin: var(--spacing-xl) auto;
  padding: 0 var(--spacing-md);
}

.content-panel {
  background-color: var(--theme-bg-panel);
  border-radius: var(--border-radius-lg);
  border: 1px solid var(--theme-border-soft);
  box-shadow: var(--shadow-md);
  overflow: hidden; /* Zorgt dat kind-elementen de border-radius respecteren */
}

/* ===================================================================
 * TITELBALK & ACCORDION
 * Het hart van de visuele structuur.
 * =================================================================== */
.questionnaire-title-bar {
  background-color: var(--theme-bg-panel);
  padding: var(--spacing-md) var(--spacing-lg);
  border-bottom: 1px solid var(--theme-border-soft);
  position: sticky;
  top: var(--global-header-height);
  z-index: 1020;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.questionnaire-title-bar .h3 {
  letter-spacing: var(--header-letter-spacing);
  margin: 0;
}

.accordion-item {
  position: relative;
  border-bottom: 1px solid var(--theme-border-soft) !important;
}
.accordion-item:last-child { border-bottom: none !important; }

.accordion-header .accordion-button {
  font-weight: 600;
  font-size: 0.95rem;
  color: var(--theme-text-primary);
  background-color: transparent;
  padding: var(--spacing-md) var(--spacing-lg);
  border: none !important;
  box-shadow: none !important;
  border-radius: 0 !important;
  width: 100%;
  display: flex;
  align-items: center;
  gap: var(--spacing-md);
  transition: background-color var(--transition-fast);
}

.accordion-header .accordion-button:hover { background-color: var(--theme-bg-alt); }

/* Actieve/open state van de accordion header */
.accordion-header .accordion-button:not(.collapsed) {
  color: var(--theme-primary);
  background-color: var(--theme-primary-light);
}

.section-number {
  font-weight: 600;
  color: var(--theme-primary);
  background-color: var(--theme-primary-light);
  padding: var(--spacing-xs) var(--spacing-sm);
  border-radius: var(--border-radius-sm);
  font-size: 0.8rem;
  line-height: 1;
  transition: all var(--transition-fast);
}
.accordion-header .accordion-button:not(.collapsed) .section-number {
  background-color: var(--theme-primary);
  color: var(--theme-bg-panel);
}

/* Open/dicht icoon */
.accordion-button::before {
  content: '\f054'; /* Font Awesome Chevron Right */
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  font-size: 0.8em;
  color: var(--theme-text-secondary);
  transition: transform var(--transition-smooth), color var(--transition-fast);
  transform-origin: center;
}
.accordion-button:not(.collapsed)::before {
  color: var(--theme-primary);
  transform: rotate(90deg);
}
.accordion-button::after { display: none !important; }

.accordion-body {
  padding: 0;
  background-color: var(--theme-bg-panel);
}


/* HIËRARCHISCHE LIJNEN: De 'metrokaart' van de structuur */
.accordion-item[class*="level-"] {
    --level-indent: 0;
}
.accordion-item.level-2 { --level-indent: 1; }
.accordion-item.level-3 { --level-indent: 2; }
.accordion-item.level-4 { --level-indent: 3; }
.accordion-item.level-5 { --level-indent: 4; }

.accordion-item[class*="level-"] > .accordion-header .accordion-button,
.accordion-item[class*="level-"] > .accordion-body .question-grid {
    padding-left: calc(var(--spacing-lg) + var(--level-indent) * var(--indent-step)) !important;
    position: relative;
}

/* De verticale lijn */
.accordion-item[class*="level-"]::before {
  content: '';
  position: absolute;
  left: calc(var(--spacing-lg) + (var(--level-indent) - 0.5) * var(--indent-step) - 1px);
  top: 0;
  bottom: 0;
  width: 2px;
  background-color: var(--theme-border-soft);
  z-index: 0;
}
/* De horizontale connector-lijn */
.accordion-item[class*="level-"] > .accordion-header .accordion-button::before {
    content: ''; /* Override FontAwesome, we gebruiken dit voor de lijn */
    position: absolute;
    left: calc((var(--level-indent) - 0.5) * var(--indent-step) - 1px);
    top: 50%;
    width: calc(0.5 * var(--indent-step));
    height: 2px;
    background-color: var(--theme-border-soft);
    z-index: 0;
}
/* De 'knop' op de lijn */
.accordion-item[class*="level-"] > .accordion-header .accordion-button::after {
    display: block !important;
    content: '';
    position: absolute;
    left: calc((var(--level-indent) - 0.5) * var(--indent-step) - 5px);
    top: 50%;
    transform: translateY(-50%);
    width: 10px;
    height: 10px;
    border: 2px solid var(--theme-border-soft);
    background-color: var(--theme-bg-panel);
    border-radius: 50%;
    z-index: 1;
    transition: all var(--transition-fast);
}
.accordion-item[class*="level-"] > .accordion-header .accordion-button:hover::after {
    border-color: var(--theme-primary-dark);
}
.accordion-item[class*="level-"] > .accordion-header .accordion-button:not(.collapsed)::after {
    background-color: var(--theme-primary);
    border-color: var(--theme-primary-dark);
}


/* ===================================================================
 * VRAAG & INPUT GRID
 * Ontworpen voor helderheid en rust.
 * =================================================================== */
.question-grid {
  display: grid;
  grid-template-columns: minmax(0, 1fr) minmax(0, 1fr); /* Twee kolommen */
  gap: var(--spacing-xl);
  padding: var(--spacing-md) var(--spacing-lg);
  align-items: start; /* Veranderd naar start voor betere verticale uitlijning van langere labels */
  border-bottom: 1px solid var(--theme-border-soft);
}
.accordion-body > .question-grid:last-child { border-bottom: none; }
.accordion-body .question-grid { padding-left: var(--spacing-lg) !important; } /* Standaard padding voor level-1 */

.question-details {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-xs);
  padding-top: var(--spacing-sm); /* Voeg wat padding toe voor uitlijning met input */
}

.question-name-text {
  font-size: 0.9rem;
  font-weight: 500;
  color: var(--theme-text-primary);
}
.occurrence {
  font-size: 0.75rem;
  color: var(--theme-text-secondary);
  font-family: var(--font-mono);
}

.question-value-area {
  /* De input velden zullen hierin geplaatst worden. 
     Deze area neemt de tweede kolom van de .question-grid in. */
}

.question-value-area .form-check { margin: 0; }

/* ===================================================================
 * FORMULIEREN & TOM SELECT
 * Volledig custom design voor een premium gevoel.
 * =================================================================== */
/* Basis styling voor alle controls */
input.form-control-sm,
select.form-select-sm, /* Standaard select wordt ook gestyled */
textarea.form-control-sm,
.ts-wrapper.form-select-sm .ts-control { /* Tom Select control */
  font-family: var(--font-sans);
  font-size: 0.9rem !important;
  background-color: var(--theme-bg-panel) !important;
  border: 1px solid var(--theme-border-strong) !important;
  border-radius: var(--border-radius-md) !important;
  padding: var(--spacing-sm) var(--spacing-md) !important;
  color: var(--theme-text-primary);
  
  /* --- HIER IS DE WIJZIGING VOOR VASTE BREEDTE --- */
  width: 350px; /* Vaste breedte ingesteld, pas deze waarde naar wens aan */
  /* max-width: 100%; */ /* Optioneel: zorgt dat het veld niet breder wordt dan zijn container als die smaller is */
  
  box-shadow: var(--shadow-sm) !important;
  transition: all var(--transition-fast);
  box-sizing: border-box; /* Essentieel bij vaste breedte en padding/border */
}

/* Om ervoor te zorgen dat de TomSelect wrapper ook de vaste breedte respecteert (indien nodig) */
.ts-wrapper.form-select-sm {
  width: 350px; /* Zelfde vaste breedte als hierboven */
  /* max-width: 100%; */ /* Optioneel */
  position: relative; /* Behoud voor pijl positionering */
}


input::placeholder, textarea::placeholder { color: var(--theme-text-placeholder); }

/* Focus state voor alle controls */
input.form-control-sm:focus,
select.form-select-sm:focus,
textarea.form-control-sm:focus,
.ts-wrapper.form-select-sm.focus .ts-control {
  border-color: var(--theme-primary) !important;
  box-shadow: 0 0 0 3px var(--theme-focus-ring) !important;
  outline: none;
}

/* Tom Select specifieke styling */
/* .ts-wrapper.form-select-sm { position: relative; } -- is al hierboven */
.ts-wrapper.form-select-sm .ts-control { 
  cursor: pointer; 
  width: 100%; /* ts-control moet 100% van de .ts-wrapper zijn */
}


/* Custom pijl voor Tom Select (vervangt ::after) */
.ts-wrapper.form-select-sm::after {
  content: '\f078';
  font-family: "Font Awesome 6 Free";
  font-weight: 900;
  position: absolute;
  top: 50%;
  right: var(--spacing-md);
  transform: translateY(-50%);
  color: var(--theme-text-secondary);
  font-size: 0.8em;
  pointer-events: none;
  transition: transform var(--transition-smooth);
}
.ts-wrapper.form-select-sm.focus::after { transform: translateY(-50%) rotate(180deg); }

.ts-wrapper.form-select-sm .ts-control > div:not([class*='-input']) {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.ts-dropdown {
  border: 1px solid var(--theme-border-strong) !important;
  border-radius: var(--border-radius-md) !important;
  box-shadow: var(--shadow-lg) !important;
  background: var(--theme-bg-panel) !important;
  margin-top: var(--spacing-sm) !important;
  overflow: hidden;
  /* Zorg dat de dropdown niet breder wordt dan het veld, of juist wel als nodig */
  min-width: 350px; /* Of gelijk aan de .ts-wrapper width */
}
.ts-dropdown .ts-dropdown-content {
  max-height: 220px;
  padding: var(--spacing-sm) 0;
}
.ts-dropdown .option {
  padding: var(--spacing-sm) var(--spacing-md);
  font-size: 0.9rem;
  transition: background-color var(--transition-fast), color var(--transition-fast);
}
.ts-dropdown .option:hover,
.ts-dropdown .active {
  background-color: var(--theme-primary-light) !important;
  color: var(--theme-primary) !important;
}

.ts-wrapper.form-select-sm .ts-control .clear-button {
  right: 2.5rem;
  opacity: 0.7;
}

/* Specifieke styling voor checkboxen en radiobuttons indien nodig */
.form-check-input {
    width: auto; /* Checkboxen/radio's hebben meestal geen grote breedte nodig */
    margin-right: var(--spacing-sm);
}
.form-check-label {
    font-weight: normal;
}
.form-check { /* Container voor checkbox/radio + label */
    display: flex;
    align-items: center;
    margin-bottom: var(--spacing-sm); /* Ruimte tussen meerdere check/radio opties */
}

/* ===================================================================
 * COMMENTAAR SECTIE
 * =================================================================== */
.comments-section {
  padding-left: var(--spacing-lg);
  border-left: 1px solid var(--theme-border-soft);
  margin-top: var(--spacing-lg); /* Voeg wat ruimte toe boven de commentaarsectie */
}
.comment-title {
  font-size: 1rem;
  font-weight: 600;
  margin-bottom: var(--spacing-md);
  letter-spacing: var(--header-letter-spacing);
}
.comment {
  padding: var(--spacing-sm) 0;
  border-bottom: 1px solid var(--theme-border-soft);
}
.comment:last-child { border-bottom: none; }
.comment-author {
  font-weight: 600;
  color: var(--theme-text-primary);
  font-size: 0.85rem;
}
.comment-text {
  margin: var(--spacing-xs) 0;
  line-height: var(--line-height-base);
}
.comment-meta {
  font-size: 0.75rem;
  color: var(--theme-text-secondary);
  font-family: var(--font-mono);
}
/* Formulier voor nieuw commentaar */
.comment-form textarea {
    width: 100%; /* Laat de textarea wel de volle breedte van zijn container nemen */
    min-height: 80px;
    margin-bottom: var(--spacing-sm);
}
.comment-form .btn {
    margin-top: var(--spacing-sm);
}

/* ===================================================================
 * PAGINERING & KNOPPEN
 * =================================================================== */
.pagination-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--spacing-md) var(--spacing-lg);
  background-color: var(--theme-bg-alt);
  border-top: 1px solid var(--theme-border-soft);
}

.btn {
  font-family: var(--font-sans);
  font-weight: 600;
  font-size: 0.9rem;
  padding: var(--spacing-sm) var(--spacing-lg);
  border-radius: var(--border-radius-md);
  border: 1px solid transparent;
  cursor: pointer;
  transition: all var(--transition-fast);
  text-decoration: none; /* Voor <a> tags die als knop gebruikt worden */
  display: inline-block; /* Voor correcte padding/margin op <a> tags */
}

.btn-primary {
  background-color: var(--theme-primary);
  color: var(--theme-bg-panel);
  border-color: var(--theme-primary);
}
.btn-primary:hover {
  background-color: var(--theme-primary-dark);
  border-color: var(--theme-primary-dark);
}

.btn-secondary {
  background-color: var(--theme-bg-panel);
  color: var(--theme-text-primary);
  border-color: var(--theme-border-strong);
}
.btn-secondary:hover {
  background-color: var(--theme-bg-alt);
  border-color: #adb5bd; /* Iets donkerder voor hover */
}

.btn:disabled, .btn.disabled {
  opacity: 0.65;
  cursor: not-allowed;
}

/* Flash messages styling (passend bij het thema) */
.alert {
  padding: var(--spacing-md);
  margin-bottom: var(--spacing-lg);
  border: 1px solid transparent;
  border-radius: var(--border-radius-md);
  font-size: 0.9rem;
}
.alert-success {
  color: #0f5132;
  background-color: #d1e7dd;
  border-color: #badbcc;
}
.alert-danger {
  color: #842029;
  background-color: #f8d7da;
  border-color: #f5c2c7;
}
.alert-warning {
  color: #664d03;
  background-color: #fff3cd;
  border-color: #ffecb5;
}
.alert-info {
  color: #055160;
  background-color: #cff4fc;
  border-color: #b6effb;
}